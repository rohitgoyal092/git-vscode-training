(this.webpackJsonpstarwarsapi3=this.webpackJsonpstarwarsapi3||[]).push([[0],{11:function(e,t,r){},13:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),c=r(6),o=r.n(c),u=(r(11),r(4)),i=void 0,s=function(e){var t=a.a.useState(e),r=Object(u.a)(t,2),n=r[0],c=r[1],o=a.a.useState(!1),s=Object(u.a)(o,2),l=s[0],d=s[1],f=a.a.useState((function(){return function(e){c((function(){return e})),d((function(){return!1}))}}))[0],j=a.a.useState((function(){return function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return function(){for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];clearTimeout(t),t=setTimeout((function(){e.apply(i,a)}),r)}}(f)}))[0];return{id:n,isTyping:l,handleValueChange:a.a.useState((function(){return function(e){e?(d((function(){return!0})),j(e)):f(e)}}))[0]}},l=r(0),d=function(){return Object(l.jsx)("div",{className:"film no-border",children:"Receiving Input...."})},f=function(){return Object(l.jsx)("div",{className:"film no-border",children:""})},j=r(3),b=r(2);var m={IDLE:"idle",FETCHING:"fetching",ERROR:"error"},O="url error",h="data error",v="network error",g=["controller","url","n"],p=["url","n","controller"],E=["url"],x=function e(t){var r=t.controller,n=t.url,a=t.n,c=Object(j.a)(t,g),o=r.signal;return fetch(n,{signal:o}).then((function(e){return Promise.resolve(e)})).catch((function(t){return o.aborted||1===a?Promise.reject(t):e(Object(b.a)({url:n,n:a-1,controller:r},c))}))},N=function(e){var t=e.url,r=e.n,n=e.controller,a=Object(j.a)(e,p);return new Promise((function(e,c){var o=setTimeout((function(){n.abort(),c(Error("Error Code : 408. Exceeded Timeout Limit!"))}),1e4);x(Object(b.a)({controller:n,url:t,n:r},a)).then((function(t){e(t)})).catch((function(e){c(e)})).finally((function(){clearTimeout(o)}))}))},R=function(e){var t=e.url,r=(Object(j.a)(e,E),{data:null,error:null,status:m.IDLE}),n=a.a.useState(Object(b.a)({},r)),c=Object(u.a)(n,2),o=c[0],i=c[1];return a.a.useLayoutEffect((function(){var e=new AbortController,n=!0,a=!1;return t&&(i((function(e){return Object(b.a)(Object(b.a)({},r),{},{status:m.FETCHING})})),N({url:t,n:10,controller:e}).then((function(e){if(n)return e.ok?e.json():(a=!0,i((function(r){return Object(b.a)(Object(b.a)({},r),{},{status:m.ERROR,error:{type:O,message:'Error hitting the url : "'.concat(t,'". ErrorCode ').concat(e.status)}})})),Promise.resolve())}),(function(e){n&&(a=!0,i((function(t){return Object(b.a)(Object(b.a)({},t),{},{status:m.ERROR,error:{type:v,message:"Network Error : ".concat(e.message)}})})))})).then((function(e){n&&(a||i((function(t){return Object(b.a)(Object(b.a)({},t),{},{data:e,status:m.IDLE})})))})).catch((function(e){n&&i((function(t){return Object(b.a)(Object(b.a)({},t),{},{status:m.ERROR,error:{type:h,message:"Parsing Error : Could not understand what was returned : ".concat(e.message)}})}))}))),function(){n=!1,e.abort()}}),[t]),{data:o.data,loading:o.status===m.FETCHING,error:o.status===m.ERROR?o.error:null}},I=["url"],C=function(e){var t=e.url,r=(Object(j.a)(e,I),R({url:t})),n=r.data,a=r.loading,c=r.error;return c?Object(l.jsx)("div",{className:"character no-border",children:c.message}):a?Object(l.jsx)("div",{className:"character no-border",children:"Retrieving..."}):n?Object(l.jsx)("div",{className:"character",children:n.name}):Object(l.jsx)("div",{className:"character no-border",children:""})},T=["filmId"],w=function(e){var t=e.filmId,r=(Object(j.a)(e,T),R({url:"".concat("https://swapi.dev/api/films/").concat(t)})),n=r.data,a=r.loading,c=r.error;return c?Object(l.jsx)("div",{className:"film no-border",children:c.message}):a?Object(l.jsx)("div",{className:"film no-border",children:"Retrieving..."}):n?Object(l.jsx)("ul",{className:"film",children:n.characters.map((function(e){return Object(l.jsx)(C,{url:e},"".concat(e))}))}):Object(l.jsx)("div",{className:"film no-border",children:""})},y=function(e){"Enter"===e.key&&e.preventDefault()},P=function(){var e=s(0),t=e.id,r=e.isTyping,a=e.handleValueChange,c=Object(n.useState)(""),o=Object(u.a)(c,2),i=o[0],j=o[1];return Object(l.jsxs)("div",{className:"app",children:[Object(l.jsx)("form",{className:"app-form",onKeyPress:y,children:Object(l.jsx)("input",{className:"app-input",placeholder:"Please input film id (Number : 1 to 6)",value:i,onChange:function(e){var t,r=e.currentTarget.value;(t=r).length<1||t.match(/^[0-9]+$/)?(j((function(){return r})),a(parseInt(r,10))):a(parseInt(i,10))}})}),r?Object(l.jsx)(d,{}):t?Object(l.jsx)(w,{filmId:t}):Object(l.jsx)(f,{})]})},S=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,14)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;r(e),n(e),a(e),c(e),o(e)}))};o.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(P,{})}),document.getElementById("root")),S()}},[[13,1,2]]]);
//# sourceMappingURL=main.8cab68c8.chunk.js.map